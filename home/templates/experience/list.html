{% extends "pagebase.html" %}
{% load misc staticfiles %}



{% block content %}
<div class="container" ng-controller="ExploreController">

  <div class="row">
    <div class="col-sm-9">
      <div class="events-list-title">[[ listTitle ]]</div>
    </div>
    <div class="col-sm-3">
      <div class="text-right">
        <a href="{% url 'explore-map' ngScopeInitials.listKey %}"
           class="btn btn-orpheus-purple large">
          Map View
        </a>
      </div>
    </div>
  </div>

  <div ng-show="isLoading" class="mt50px">
    {% OctagramLoader %}
  </div>

  <div ng-repeat="event in events | filter:listFilter(listKey)"
       class="event-block" ng-cloak>
    <div class="expand-event-block">
      <span class="glyphicon glyphicon-resize-full"></span>
    </div>
    <div class="content-case">
      <div class="event-info">
        <a href="/experience/page/[[ event.id ]]/"
           class="event-name" title="[[ event.name ]]">
          <span class="inner-content">
            [[ event.name ]]
          </span>
        </a>
        <div class="event-venue">
          <span class="inner-content">
            @ 
            <a href="/experience/page/[[ event.venue.id ]]/"
               title="[[ event.venue.name ]]">
              [[ event.venue.name ]]
            </a>
          </span>
        </div>
        <div class="event-datetime">
          <span class="inner-content">
            <span ng-bind-html="event | dateRange"></span>
          </span>
        </div>
        <div class="event-artists">
          <span class="inner-content">
            <span ng-repeat="artist in event.artists">
              <span ng-show="$last && $index > 0">&amp;</span>
              <a href="/experience/page/[[ artist.id ]]/" class="ib">
                [[ artist.name ]]
              </a><span ng-show="!$last && event.artists.length > 2">,</span>
            </span>
          </span>
        </div>
      </div>
      <div class="event-actions">
        <a href="#" class="pull-left">Directions</a>
        <a href="#" class="pull-right">Attend</a>
      </div>
    </div>
  </div>
</div>

<div ng-cloak ng-show="listKey == 'featured'" id="feature-feature">
  <div class="container">
    <hr>
    <h4>Interested in featuring your event?</h4>
    <a class="btn btn-success"
       target="_blank"
       href="#">
      Find out more &raquo;
    </a>
  </div>
</div>
{% endblock content %}


{% block postscripts %}
<script src="{% static 'my/scripts/geo.js' %}"></script>
{% endblock %}
